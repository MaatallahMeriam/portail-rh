<div class="collab-home">
    <app-header></app-header>
  
    <div class="main-content">
        <app-sidebar (sidebarStateChange)="onSidebarStateChange($event)"></app-sidebar>
        
        <div class="feed" [class.sidebar-collapsed]="isSidebarCollapsed">
            <main class="content">
                <h2>Planning Télétravail :</h2>

                <!-- Badge for Current Month -->
                <div class="month-badge">
                    <div class="badge-content">
                        <span class="month-text">{{ currentMonth | date: 'MMMM' }}</span>
                        <span class="year-text">{{ currentMonth | date: 'yyyy' }}</span>
                    </div>
                </div>

                <!-- Message si aucun planning n'existe -->
                <div class="no-planning" *ngIf="!userPlanning">
                    <h3>Aucun planning de télétravail n'est disponible pour ce mois.</h3>
                </div>
                <div class="planning-exists">
                          <h3>Votre PLANNING TT pour ce mois :</h3>

    <!-- Calendrier pour sélectionner ou afficher les jours -->
    <div class="calendar-card" *ngIf="userPlanning">
        <div class="calendar-header">
            <span class="max-days-badge" *ngIf="userPlanning.planning?.nombreJoursMax && userPlanning.planning?.politique !== 'PLANNING_FIXE_JOURS_LIBRES'">
                <mat-icon>event</mat-icon> Max {{ userPlanning.planning?.nombreJoursMax }} jours
            </span>
        </div>
        <div class="calendar-grid">
            <div class="day-label" *ngFor="let day of ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim']">{{ day }}</div>
            <div
                class="calendar-day"
                *ngFor="let day of calendarDays"
                [ngClass]="{
                    'filler': !day.isCurrentMonth,
                    'today': day.isToday && !isSelectedDay(day.date),
                    'selected': isSelectedDay(day.date),
                    'disabled': (!isDaySelectable(day.date) && !isSelectedDay(day.date)) || (isValidated && !isSelectedDay(day.date))
                }"
                (click)="toggleDay(day.date)"
            >
                {{ day.date.getDate() }}
            </div>
        </div>

        <!-- Bouton Valider -->
        <div *ngIf="!isValidated">
            <button
                class="add-button save-button"
                (click)="validateSelection()"
                [disabled]="selectedDays.length === 0"
            >
                Valider
            </button>
        </div>
    </div>

    <!-- Lien vers pointage-collab -->
    <p class="pointage-link" (click)="navigateToPointage()">Consulter mon pointage</p>
</div>
            </main>
        </div>
    </div>
</div>